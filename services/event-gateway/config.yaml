# Event Gateway Configuration

# Server configuration
server:
  address: ":8090"
  read_timeout: 30 # seconds
  write_timeout: 30 # seconds
  idle_timeout: 120 # seconds

# gRPC configuration
grpc:
  enabled: true
  address: ":50051" # Changed from :9090 to avoid Prometheus conflict
  max_connections: 10000
  max_concurrent_streams: 1000
  max_connection_age: 120 # seconds
  keepalive_time: 10 # seconds
  keepalive_min_age: 5 # seconds

# WebSocket configuration
websocket:
  enabled: false
  path: "/ws"
  ping_interval: 30 # seconds

# Kafka configuration
kafka:
  brokers:
    - "localhost:9092"
    - "kafka:29092" # Docker internal network
  topic: "events"
  retries: 3
  batch_size: 100
  required_acks: 1 # 0=NoResponse, 1=WaitForLocal, -1=WaitForAll

# Metrics configuration
metrics:
  enabled: true
  path: "/metrics"

# Rate limiting configuration
rate_limit:
  requests_per_second: 1000
  burst_size: 2000

# Logging configuration
logging:
  level: "info" # debug, info, warn, error
  format: "json" # json, console

# Health check configuration
health:
  path: "/health"
  detailed_path: "/health/detailed"

# CORS configuration
cors:
  allowed_origins:
    - "*"
  allowed_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allowed_headers:
    - "Content-Type"
    - "Authorization"
    - "X-Request-ID"
  expose_headers:
    - "X-Request-ID"
  allow_credentials: false
  max_age: 3600

# Security configuration
security:
  enable_auth: false
  api_keys:
    - "dev-api-key-123"
    - "test-api-key-456"

# Performance tuning
performance:
  max_request_size: "10MB"
  request_timeout: 30
  keep_alive_timeout: 75
  max_concurrent_requests: 10000
